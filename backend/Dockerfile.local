FROM node:20

WORKDIR /app
COPY package*.json ./

RUN npm install
COPY . .

ENV DATABASE_URL=mongodb://root:password@mongoDB:27017/signbank?authSource=admin&replicaSet=rs0
ENV ADMIN_EMAIL=admin@example.com
ENV ADMIN_PASSWORD=password

RUN npx prisma generate
RUN npx prisma db seed

CMD ["npm", "run", "start:docker:dev"]
